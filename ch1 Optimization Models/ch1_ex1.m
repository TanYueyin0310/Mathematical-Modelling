% Date: 2020/3/1
% Author: TAN Yueyin
%% 存入数据
M = 5000; r1 = 0.018; r2 = 0.0216; r3 = 0.02592; r5 =0.0288;
format long
A = [0.780000000000000,-0.220000000000000,-0.220000000000000,-0.220000000000000,-0.220000000000000,0,0,0,0,0;
    -0.820000000000000,0.180000000000000,0.180000000000000,0.180000000000000,0.180000000000000,0,0,0,0,0;
    -0.220000000000000,0.780000000000000,-0.220000000000000,-0.220000000000000,-0.220000000000000,0,0,0,0,0;
    0.180000000000000,-0.820000000000000,0.180000000000000,0.180000000000000,0.180000000000000,0,0,0,0,0;
    -0.220000000000000,-0.220000000000000,0.780000000000000,-0.220000000000000,-0.220000000000000,0,0,0,0,0;
    0.180000000000000,0.180000000000000,-0.820000000000000,0.180000000000000,0.180000000000000,0,0,0,0,0;
    -0.220000000000000,-0.220000000000000,-0.220000000000000,0.780000000000000,-0.220000000000000,0,0,0,0,0;
    0.180000000000000,0.180000000000000,0.180000000000000,-0.820000000000000,0.180000000000000,0,0,0,0,0;
    -0.220000000000000,-0.220000000000000,-0.220000000000000,-0.220000000000000,0.780000000000000,0,0,0,0,0;
    0.180000000000000,0.180000000000000,0.180000000000000,0.180000000000000,-0.820000000000000,0,0,0,0,0];
b = zeros(10,1);
beq = [0 0 0 0 M M]';
%% 存期3+1处理
Aeq = [-1 0 0 0 0 (1 + r1) 0 0 0 0;
       0 -1 0 0 0 0 (1 + 2 * r2) 0 0 0 ;
       0 0 -1 -1/(1+r1) 0 0 0 0 (1 + 3 * r3) 0;
       0 0 0 -1 0 0 0 (1 + r1) 0 0;
       0 0 0 0 -1  0 0 0 0 (1+5 * r5);
       0 0 0 0 0 1 1 0 1 1;];
%% 存期2+2处理
% Aeq = [-1 0 0 0 0 (1 + r1) 0 0 0 0;
%        0 -1 0 (-1/(1 + 2 *r2)) 0 0 (1 + 2 * r2) 0 0 0 ;
%        0 0 -1 0 0 0 0 0 (1 + 3 * r3) 0;
%        0 0 0 -1 0 0 0 (1 + 2 * r2) 0 0;
%        0 0 0 0 -1  0 0 0 0 (1+5 * r5);
%        0 0 0 0 0 1 1 0 1 1;];
%% 线性优化问题
lb = M * r1 * ones(10,1);%下边界限制
lb(6:10) = zeros(5,1);
ub = M * ones(10,1);%上边界限制
f0 = M * r1;
x0 = [f0 f0 f0 f0 f0 0 0 0 0 0 ]';
c = [-1 -1 -1 -1 -1 0 0 0 0 0 ]';
[x, favl, exitflag] = linprog(c ,A, b,Aeq, beq, lb, ub, [])
%[x,fval,exitflag, output] = fmincon('ch1_ex1_f',x0,A ,b ,Aeq,beq,lb,ub,[],[])     